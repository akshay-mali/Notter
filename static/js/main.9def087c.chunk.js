(this.webpackJsonpnotter=this.webpackJsonpnotter||[]).push([[0],{37:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),r=a(29),s=a.n(r),i=(a(37),a(6)),l=a.n(i),u=a(10),o=a(4),j=a(7),d=a(11),b=a(21),p=(a(39),a(49),a(48),b.a.initializeApp({apiKey:"AIzaSyBPtxivFvFpcdELWnuDVTwwwvyfm0xxxEM",authDomain:"notter-126fe.firebaseapp.com",projectId:"notter-126fe",storageBucket:"notter-126fe.appspot.com",messagingSenderId:"821151179526",appId:"1:821151179526:web:e51c5bb7d35c142b997487"})),h=p.auth(),O=b.a.storage(),m=b.a.firestore(),f=b.a.firestore.FieldValue.serverTimestamp,x=a(1),v=n.a.createContext();function _(){return Object(c.useContext)(v)}function g(e){var t=e.children,a=Object(c.useState)(null),n=Object(o.a)(a,2),r=n[0],s=n[1],i=Object(c.useState)(!0),j=Object(o.a)(i,2),d=j[0],b=j[1];Object(c.useEffect)((function(){var e;return e=h.onAuthStateChanged(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!1),s(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){e()}}),[]);var p={currentUser:r,signup:function(e,t){return h.createUserWithEmailAndPassword(e,t)},login:function(e,t){return h.signInWithEmailAndPassword(e,t)},logout:function(){return h.signOut()},resetPassword:function(e){return h.sendPasswordResetEmail(e)},updateEmail:function(e){return r.updateEmail(e)},updatePassword:function(e){return r.updatePassword(e)}};return Object(x.jsx)(v.Provider,{value:p,children:!d&&t})}var N=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=Object(c.useRef)(),n=_().signup,r=Object(c.useState)(""),s=Object(o.a)(r,2),i=s[0],b=s[1],p=Object(c.useState)(!1),h=Object(o.a)(p,2),O=h[0],m=h[1],f=Object(j.g)();function v(){return(v=Object(u.a)(l.a.mark((function c(r){return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(r.preventDefault(),t.current.value===a.current.value){c.next=3;break}return c.abrupt("return",b("Passwords donot match"));case 3:return c.prev=3,m(!0),b(""),c.next=8,n(e.current.value,t.current.value);case 8:m(!1),f.push("/"),c.next=16;break;case 12:c.prev=12,c.t0=c.catch(3),m(!1),b("Failed to create an account");case 16:case"end":return c.stop()}}),c,null,[[3,12]])})))).apply(this,arguments)}return Object(x.jsxs)("div",{className:"authform__container",children:[Object(x.jsx)("h2",{className:"authform__title",children:"Signup"}),i&&Object(x.jsxs)("p",{className:"authform__error",children:[" ",i," "]}),Object(x.jsxs)("form",{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(x.jsxs)("div",{className:"authform__input-field",children:[Object(x.jsx)("label",{children:"Email"}),Object(x.jsx)("input",{type:"email",ref:e,required:!0})]}),Object(x.jsxs)("div",{className:"authform__input-field",children:[Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",{type:"password",ref:t,required:!0})]}),Object(x.jsxs)("div",{className:"authform__input-field",children:[Object(x.jsx)("label",{children:"ConfirmPassword"}),Object(x.jsx)("input",{type:"password",ref:a,required:!0})]}),Object(x.jsx)("div",{className:"authform__input-field",children:Object(x.jsx)("button",{disabled:O,type:"Submit",className:"authform__btn",children:"Signup"})})]}),Object(x.jsxs)("div",{className:"authform__direct",children:["Already have a account? ",Object(x.jsx)(d.b,{to:"/login",children:"Login"})]})]})};var w=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),a=t[0],n=t[1],r=_(),s=r.currentUser,i=r.logout,b=Object(j.g)(),p=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,i();case 4:b.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"authform__container",children:[Object(x.jsx)("h2",{className:"authform__title",children:"Profile"}),a&&Object(x.jsxs)("p",{className:"authform__error",children:[" ",a," "]}),Object(x.jsx)("strong",{children:"Email : "})," ",Object(x.jsx)("span",{children:s.email}),Object(x.jsx)("p",{className:"authform__direct",children:Object(x.jsx)(d.b,{to:"/",className:"button",children:"Go to Dasahboard"})}),Object(x.jsx)("p",{className:"authform__direct",children:Object(x.jsx)(d.b,{to:"/update-profile",className:"button",children:"Update Profile"})}),Object(x.jsx)("button",{onClick:p,className:"authform__btn",children:"Logout"})]})};var k=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=_().login,n=Object(c.useState)(""),r=Object(o.a)(n,2),s=r[0],i=r[1],b=Object(c.useState)(!1),p=Object(o.a)(b,2),h=p[0],O=p[1],m=Object(j.g)();function f(){return(f=Object(u.a)(l.a.mark((function c(n){return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.preventDefault(),c.prev=1,O(!0),i(""),c.next=6,a(e.current.value,t.current.value);case 6:O(!1),m.push("/"),c.next=14;break;case 10:c.prev=10,c.t0=c.catch(1),O(!1),i("Failed to sign in.");case 14:case"end":return c.stop()}}),c,null,[[1,10]])})))).apply(this,arguments)}return Object(x.jsxs)("div",{className:"authform__container",children:[Object(x.jsx)("h2",{className:"authform__title",children:"Login"}),s&&Object(x.jsxs)("p",{className:"authform__error",children:[" ",s," "]}),Object(x.jsxs)("form",{onSubmit:function(e){return f.apply(this,arguments)},children:[Object(x.jsxs)("div",{className:"authform__input-field",children:[Object(x.jsx)("label",{children:"Email address"}),Object(x.jsx)("input",{type:"email",ref:e,required:!0})]}),Object(x.jsxs)("div",{className:"authform__input-field",children:[Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",{type:"password",ref:t,required:!0})]}),Object(x.jsxs)("div",{className:"authform__forgotpass",children:[" ",Object(x.jsx)(d.b,{to:"/forgot-password",children:"Forgot your Password?"})," "]}),Object(x.jsx)("div",{className:"authform__input-field",children:Object(x.jsx)("button",{disabled:h,type:"Submit",className:"authform__btn",children:"Login"})})]}),Object(x.jsxs)("div",{className:"authform__direct",children:["Need an account? ",Object(x.jsx)(d.b,{to:"/signup",children:"Signup"})]})]})},y=a(15),S=a(32);var E=function(e){var t=e.component,a=Object(S.a)(e,["component"]),c=_().currentUser;return Object(x.jsx)(j.b,Object(y.a)(Object(y.a)({},a),{},{render:function(e){return c?Object(x.jsx)(t,Object(y.a)({},e)):Object(x.jsx)(j.a,{to:"/login"})}}))};var C=function(){var e=Object(c.useRef)(),t=_().resetPassword,a=Object(c.useState)(""),n=Object(o.a)(a,2),r=n[0],s=n[1],i=Object(c.useState)(!1),j=Object(o.a)(i,2),b=j[0],p=j[1],h=Object(c.useState)(""),O=Object(o.a)(h,2),m=O[0],f=O[1];function v(){return(v=Object(u.a)(l.a.mark((function a(c){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c.preventDefault(),a.prev=1,p(!0),f(""),s(""),a.next=7,t(e.current.value);case 7:f("Check your inbox for further instructions."),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),s("Failed to Reset Password");case 13:p(!1);case 14:case"end":return a.stop()}}),a,null,[[1,10]])})))).apply(this,arguments)}return Object(x.jsxs)("div",{className:"authform__container",children:[Object(x.jsx)("h2",{className:"authform__title",children:"Password Reset"}),m&&Object(x.jsxs)("p",{children:[" ",m," "]}),r&&Object(x.jsxs)("p",{className:"authform__error",children:[" ",r," "]}),Object(x.jsxs)("form",{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(x.jsxs)("div",{className:"authform__input-field",children:[Object(x.jsx)("label",{children:"Email"}),Object(x.jsx)("input",{type:"email",ref:e,required:!0})]}),Object(x.jsx)("div",{className:"authform__input-field",children:Object(x.jsx)("button",{disabled:b,type:"Submit",className:"authform__btn",children:"Reset Password"})})]}),Object(x.jsxs)("div",{className:"authform__direct",children:["Already have an account? ",Object(x.jsx)(d.b,{to:"/login",children:"Login"})," "]}),Object(x.jsxs)("div",{className:"authform__direct",children:["Need an account? ",Object(x.jsx)(d.b,{to:"/signup",children:"Signup"})]})]})};var P=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=Object(c.useRef)(),n=_(),r=n.currentUser,s=n.updateEmail,i=n.updatePassword,b=Object(c.useState)(""),p=Object(o.a)(b,2),h=p[0],O=p[1],m=Object(c.useState)(!1),f=Object(o.a)(m,2),v=f[0],g=f[1],N=Object(j.g)();function w(){return(w=Object(u.a)(l.a.mark((function c(n){var u;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(n.preventDefault(),O(""),g(!0),t.current.value===a.current.value){c.next=5;break}return c.abrupt("return",O("Passwords donot match"));case 5:u=[],e.current.value!==r.email&&u.push(s(e.current.value)),t.current.value&&u.push(i(t.current.value)),Promise.all(u).then((function(){g(!1),N.push("/profile")})).catch((function(){g(!1),O("Failed to update account")}));case 9:case"end":return c.stop()}}),c)})))).apply(this,arguments)}return Object(x.jsxs)("div",{className:"authform__container",children:[Object(x.jsx)("h2",{className:"authform__title",children:"Update Profile"}),h&&Object(x.jsxs)("p",{children:[" ",h," "]}),Object(x.jsxs)("form",{onSubmit:function(e){return w.apply(this,arguments)},children:[Object(x.jsxs)("div",{className:"authform__input-field",children:[Object(x.jsx)("label",{children:"Email"}),Object(x.jsx)("input",{type:"email",ref:e,required:!0,defaultValue:r.email})]}),Object(x.jsxs)("div",{className:"authform__input-field",children:[Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",{type:"password",ref:t,placeholder:"Leave blank to keep the same"})]}),Object(x.jsxs)("div",{className:"authform__input-field",children:[Object(x.jsx)("label",{children:"ConfirmPassword"}),Object(x.jsx)("input",{type:"password",ref:a,placeholder:"Leave blank to keep the same"})]}),Object(x.jsx)("div",{className:"authform__input-field",children:Object(x.jsx)("button",{disabled:v,type:"Submit",className:"authform__btn",children:"Update"})})]}),Object(x.jsx)("div",{className:"authform__direct",children:Object(x.jsx)(d.b,{to:"/profile",children:"Cancle"})})]})},R=a(51),U=function(e){var t=Object(c.useState)(0),a=Object(o.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(null),i=Object(o.a)(s,2),j=i[0],d=i[1],b=Object(c.useState)(null),p=Object(o.a)(b,2),h=p[0],x=p[1],v=Object(c.useState)(!1),_=Object(o.a)(v,2),g=_[0],N=_[1];return Object(c.useEffect)((function(){var t=m.collection("notes"),a=function(){var a=Object(u.a)(l.a.mark((function a(c){var n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=f(),a.next=3,t.add({imageURL:c,title:e.title,paragraph:e.paragraph,list:e.list,createdAt:n});case 3:x(c),N(!0);case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();if(e.file){var c=O.ref(e.file.name);c.put(e.file).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;r(t)}),(function(e){d(e)}),Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getDownloadURL();case 2:return t=e.sent,e.next=5,a(t);case 5:case"end":return e.stop()}}),e)}))))}else a(null)}),[e]),{progress:n,url:h,error:j,done:g}},L=function(e){var t=e.data,a=e.setData,n=e.setIsUploading,r=U(t),s=r.progress,i=r.done;return Object(c.useEffect)((function(){i&&(a(null),n(!1))}),[i,a,n]),Object(x.jsx)("div",{className:"progress-bar",style:{width:s+"%"}})};var D=function(e){var t=e.showModal,a=e.setShowModal,n=e.modalData,r=Object(c.useState)(null),s=Object(o.a)(r,2),i=s[0],l=s[1],u=Object(c.useState)(null),j=Object(o.a)(u,2),d=j[0],b=j[1],p=Object(c.useState)({}),h=Object(o.a)(p,2),O=h[0],f=h[1],v=Object(c.useState)(null),_=Object(o.a)(v,2),g=_[0],N=_[1],w=Object(c.useState)(!1),k=Object(o.a)(w,2),S=k[0],E=k[1],C=Object(c.useRef)(""),P=Object(c.useRef)(""),U=Object(c.useRef)(""),D=m.collection("notes");Object(c.useEffect)((function(){n&&(P.current.value=n.title,U.current.value=n.paragraph,f(Object(y.a)({},n.list)))}),[n]);var F=["image/png","image/jpeg","image/jpg"];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:t?"body-blackout is-blacked-out":"body-blackout",onClick:function(){return a(!1)}}),Object(x.jsxs)("div",{className:t?"popup-modal shadow is--visible":"popup-modal shadow",id:"note-modal",children:[Object(x.jsx)("i",{className:"bx bx-x popup-modal__close",onClick:function(){return a(!1)}}),Object(x.jsxs)("div",{className:"popup-modal__container",children:[Object(x.jsx)("h2",{children:n?"Edit Note":"New Note"}),i&&Object(x.jsx)("p",{className:"error-string",children:i}),Object(x.jsxs)("div",{className:"input__image input__cotainer",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"file_input",className:"img-input-label",children:"Choose File"}),d?d.name:n?"image cannot be updated righth now!":"No file selected"]}),n&&n.imageURL&&Object(x.jsx)("img",{src:n.imageURL,height:"100",alt:"note_image"}),Object(x.jsx)("input",{type:"file",name:"file_input",id:"file_input",className:"img-input",disabled:!!n,onChange:function(e){var t=e.target.files[0];console.log(t),t&&(F.includes(t.type)?(b(t),l("")):(b(null),l("Please select an image file (png or jpg)")))}})]}),Object(x.jsx)("div",{className:"input__title input__cotainer",children:Object(x.jsx)("input",{type:"text",id:"titleInput",placeholder:"Title",className:"input-box",ref:P})}),Object(x.jsx)("div",{className:"input__para input__cotainer",children:Object(x.jsx)("textarea",{type:"text",id:"paragraphInput",placeholder:"Paragraph",className:"input-box",ref:U})}),Object(x.jsxs)("div",{className:"input__list input__cotainer",children:[Object.keys(O).map((function(e,t){return Object(x.jsxs)("div",{className:"list-item",children:[Object(x.jsx)("p",{className:"list-item__title",children:O[e].task}),Object(x.jsx)("input",{type:"checkbox",checked:O[e].done,onChange:function(){var t=Object(y.a)({},O);t[e]=Object(y.a)(Object(y.a)({},O[e]),{},{done:!O[e].done}),f(t)},name:"done",className:"list-item__checkbox"})]},e)})),Object(x.jsxs)("div",{className:"list-form",children:[Object(x.jsx)("input",{type:"text",className:"list-input",placeholder:"Enter task",ref:C}),Object(x.jsx)("button",{className:"add-list-btn",onClick:function(){if(""!==C.current.value){var e=C.current.value.trim(),t=Object(y.a)({},O);t[Object(R.a)()]={task:e,done:!1},f(t),C.current.value=""}else l("Task cannot be empty string")},children:"Add item"})]})]}),g&&Object(x.jsx)(L,{data:g,setData:N,setIsUploading:E}),n?Object(x.jsxs)("div",{className:"actions__container",children:[Object(x.jsx)("button",{className:"delete-note-btn",onClick:function(){var e={};P.current.value.trim()!==n.title&&(e.title=P.current.value.trim()),U.current.value.trim()!==n.paragraph&&(e.paragraph=U.current.value.trim()),e.list=O,null!==d&&(e.file=d),D.doc(n.id).update(e).then((function(){return a(!1)})).catch((function(e){return l("Error while updating: "+e)}))},children:"Update Note"}),Object(x.jsx)("button",{className:"delete-note-btn",onClick:function(){D.doc(n.id).delete().then((function(){a(!1)})).catch((function(e){l("Error removing document: ",e)}))},children:"Delete Note"})]}):Object(x.jsx)("button",{className:"create-note-btn",onClick:function(){null!==d||""!==P.current.value.trim()||""!==U.current.value.trim()||0!==Object.keys(O).length?(N({file:d,title:P.current.value.trim(),paragraph:U.current.value.trim(),list:O}),E(!0),P.current.value="",U.current.value="",f({}),b(null),l("")):l("All fields cannot be empty, atleast one must be filled")},children:S?"Uploading...":"Create Note"})]})]})]})};var F=function(e){var t=e.error,a=e.handleLogout;return Object(x.jsx)("header",{className:"header",children:Object(x.jsxs)("nav",{className:"nav",children:[Object(x.jsx)("h1",{className:"header__title",children:"Notter"}),Object(x.jsxs)("div",{className:"nav-right",children:[Object(x.jsxs)("div",{className:"search-box",children:[Object(x.jsx)("i",{className:"bx bx-search bx-sm"}),Object(x.jsx)("input",{type:"text",placeholder:"Search note"})]}),t&&Object(x.jsxs)("p",{children:[" ",t," "]}),Object(x.jsx)("button",{onClick:a,className:"logoutBtn",children:"Logout"})]})]})})},A=function(e){var t=Object(c.useState)([]),a=Object(o.a)(t,2),n=a[0],r=a[1];return Object(c.useEffect)((function(){var t=m.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(y.a)(Object(y.a)({},e.data()),{},{id:e.id}))})),r(t)}));return function(){return t()}}),[e]),{notes:n}},I=a(23);var q=function(e){var t=e.note,a=(e.index,e.handleEditNoteOnClick),c=m.collection("notes");return Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("button",{className:"card__edit-btn",onClick:function(){return a(t)},children:Object(x.jsx)("i",{className:"bx bx-pencil bx-xs"})}),t.imageURL&&Object(x.jsx)("div",{className:"card__image",children:t.imageURL&&Object(x.jsx)("img",{src:t.imageURL,alt:"",className:"img"})}),(t.title||t.paragraph)&&Object(x.jsxs)("div",{className:"card__text",style:{borderBottom:0!==Object.keys(t.list).length?"1px solid #ECECEC":""},children:[Object(x.jsx)("h3",{className:"card__title",children:t.title}),Object(x.jsx)("p",{className:"card__paragraph",children:t.paragraph})]}),0!==Object.keys(t.list).length&&Object(x.jsx)("ul",{className:"card__checklist",children:Object.keys(t.list).map((function(e){return Object(x.jsxs)("li",{className:"card__checklist-item completed",children:[Object(x.jsx)("input",{type:"checkbox",name:"",checked:t.list[e].done,onChange:function(){return function(e,a){c.doc(t.id).update(Object(I.a)({},"list.".concat(e,".done"),!a))}(e,t.list[e].done)}}),Object(x.jsx)("span",{style:{textDecoration:t.list[e].done?"line-through":"none"},children:t.list[e].task})]},e)}))})]})};var B=function(e){var t=e.handleEditNoteOnClick,a=A("notes").notes;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"container",children:a&&a.map((function(e,a){return Object(x.jsx)(q,{note:e,handleEditNoteOnClick:t},e.id.toString())}))})})};var M=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),a=t[0],n=t[1],r=_(),s=r.currentUser,i=r.logout,d=Object(j.g)(),b=Object(c.useState)(!1),p=Object(o.a)(b,2),h=p[0],O=p[1],m=Object(c.useState)(null),f=Object(o.a)(m,2),v=f[0],g=f[1],N=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,i();case 4:d.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"dashboard",children:[Object(x.jsx)(F,{handleLogout:N,error:a,currentUser:s}),Object(x.jsx)("button",{className:"new-note",id:"new-note-btn",onClick:function(){O(!0),g(null)},children:Object(x.jsx)("i",{className:"bx bx-plus bx-md"})}),h&&Object(x.jsx)(D,{showModal:h,setShowModal:O,modalData:v}),Object(x.jsx)(B,{handleEditNoteOnClick:function(e){O(!0),g(e)}})]})};var T=function(){return Object(x.jsx)(d.a,{children:Object(x.jsx)(g,{children:Object(x.jsxs)(j.d,{children:[Object(x.jsx)(E,{exact:!0,path:"/",component:M}),Object(x.jsx)(E,{path:"/profile",component:w}),Object(x.jsx)(E,{path:"/update-profile",component:P}),Object(x.jsx)(j.b,{path:"/signup",component:N}),Object(x.jsx)(j.b,{path:"/login",component:k}),Object(x.jsx)(j.b,{path:"/forgot-password",component:C})]})})})};s.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(T,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.9def087c.chunk.js.map